var __awaiter=this&&this.__awaiter||function(t,r,u,l){return new(u=u||Promise)(function(o,e){function n(t){try{c(l.next(t))}catch(t){e(t)}}function i(t){try{c(l.throw(t))}catch(t){e(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,i)}c((l=l.apply(t,r||[])).next())})},outputElement=document.getElementById("outputText");function finishedOutput(n){return __awaiter(this,void 0,void 0,function*(){let t=["#3cd402","#46ff00"],e=0,o=document.createElement("span");o.setAttribute("id","cursorID"),o.appendChild(document.createTextNode("▮")),setInterval(()=>{e=1-e,document.getElementById("cursorID").style.color=t[e]},500),outputElement.innerText=n,outputElement.appendChild(o)})}function prompt(){return __awaiter(this,void 0,void 0,function*(){try{var e,o,n,i,t=yield(yield fetch("/promptNPC",{method:"POST",headers:{Accept:"Application/json","Content-Type":"Application/json"},body:JSON.stringify({prompt:"generate",instruction:npcPromptInstruction})})).json();"success"==t.message&&(e=t.output,o=0,n=20,i="",function t(){o<e.length?(i+=e.charAt(o),outputElement.innerText=i+"▮",o++,setTimeout(t,n)):finishedOutput(e)}())}catch(t){console.log(t)}})}function goToLobby(){window.location.href="/lobby"}socket.emit("NPCPrompt","bob404"),setTimeout(()=>__awaiter(void 0,void 0,void 0,function*(){yield prompt()}),500);let colors=["#3cd402","#46ff00"],colorIndex=0;setInterval(()=>{colorIndex=1-colorIndex,document.getElementById("lobbyBtn").style.color=colors[colorIndex]},1e3);