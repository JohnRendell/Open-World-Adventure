var __awaiter=this&&this.__awaiter||function(t,r,u,l){return new(u=u||Promise)(function(n,e){function o(t){try{c(l.next(t))}catch(t){e(t)}}function i(t){try{c(l.throw(t))}catch(t){e(t)}}function c(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(o,i)}c((l=l.apply(t,r||[])).next())})},outputElement=(socket.emit("NPCPrompt","bob404"),document.getElementById("outputText"));function finishedOutput(o){return __awaiter(this,void 0,void 0,function*(){let t=["#3cd402","#46ff00"],e=0,n=document.createElement("span");n.setAttribute("id","cursorID"),n.appendChild(document.createTextNode("▮")),setInterval(()=>{e=1-e,document.getElementById("cursorID").style.color=t[e]},500),outputElement.innerText=o,outputElement.appendChild(n)})}function prompt(){return __awaiter(this,void 0,void 0,function*(){try{var e,n,o,i,t=yield(yield fetch("/promptNPC",{method:"POST",headers:{Accept:"Application/json","Content-Type":"Application/json"},body:JSON.stringify({prompt:"generate",instruction:npcPromptInstruction})})).json();"success"==t.message&&(e=t.output,n=0,o=20,i="",function t(){n<e.length?(i+=e.charAt(n),outputElement.innerText=i+"▮",n++,setTimeout(t,o)):finishedOutput(e)}())}catch(t){console.log(t)}})}function fireFunction(){return __awaiter(this,void 0,void 0,function*(){yield prompt()})}function goToLobby(){window.location.href="/lobby"}setTimeout(fireFunction,500);let colors=["#3cd402","#46ff00"],colorIndex=0;setInterval(()=>{colorIndex=1-colorIndex,document.getElementById("lobbyBtn").style.color=colors[colorIndex]},1e3);