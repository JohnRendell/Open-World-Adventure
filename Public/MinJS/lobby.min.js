var __awaiter=this&&this.__awaiter||function(e,a,c,r){return new(c=c||Promise)(function(t,n){function i(e){try{s(r.next(e))}catch(e){n(e)}}function o(e){try{s(r.throw(e))}catch(e){n(e)}}function s(e){var n;e.done?t(e.value):((n=e.value)instanceof c?n:new c(function(e){e(n)})).then(i,o)}s((r=r.apply(e,a||[])).next())})};let isOpenLogin=!1,isOpenSignin=!1,loggedIn_playerName;function validateAccount(){return __awaiter(this,void 0,void 0,function*(){var e=document.getElementById("login_userID"),n=document.getElementById("login_passID"),t=document.getElementById("loginWarningTxt");try{var i,o=yield(yield fetch("/login",{method:"POST",headers:{Accept:"Application/json","Content-Type":"Application/json"},body:JSON.stringify({username:e.value,password:n.value})})).json();"success"===o.message?(document.getElementById("processingDiv").style.display="flex",(i=yield setCookie(o.username,"loggedIn")).status&&(socket.emit("redirectToBase",lobby_playerName),socket.emit("playerCount",1),window.location.href="/Game/Base/"+replaceSlashWithUnderscore(i.encryptUser))):t.innerText=o.message}catch(e){console.log(e)}})}function validateCreateAccount(){return __awaiter(this,void 0,void 0,function*(){var e=document.getElementById("signin_userID"),n=document.getElementById("signin_passID"),t=document.getElementById("signin_confirmPassID"),i=document.getElementById("signinWarningTxt");try{var o,s=yield(yield fetch("/signin",{method:"POST",headers:{Accept:"Application/json","Content-Type":"Application/json"},body:JSON.stringify({username:e.value,confirmPass:t.value,password:n.value})})).json();"success"===s.message?(document.getElementById("processingDiv").style.display="flex",(o=yield setCookie(s.username,"loggedIn")).status&&(document.getElementById("processingDiv").style.display="none",socket.emit("redirectToBase",lobby_playerName),socket.emit("playerCount",1),window.location.href="/Game/Base/"+replaceSlashWithUnderscore(o.encryptUser))):i.innerText=s.message}catch(e){console.log(e)}})}document.addEventListener("keypress",function(e){"Enter"===e.key&&(isOpenLogin&&validateAccount(),isOpenSignin)&&validateCreateAccount()}),socket.emit("logoutPlayer");